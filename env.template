# Redis Configuration
REDIS_URL=redis://localhost:6379
REDIS_JOB_TTL_COMPLETED=604800  # 7 days in seconds
REDIS_JOB_TTL_FAILED=259200     # 3 days in seconds
REDIS_JOB_TTL_ACTIVE=0          # No expiration for active jobs

# RabbitMQ Configuration
RABBITMQ_URL=amqp://guest:guest@localhost:5672/

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000

# Logging
LOG_LEVEL=INFO

# Subtitle Sources - OpenSubtitles (XML-RPC)
OPENSUBTITLES_USER_AGENT=get-my-subtitle v1.0
OPENSUBTITLES_USERNAME=
OPENSUBTITLES_PASSWORD=
OPENSUBTITLES_MAX_RETRIES=3              # Maximum number of retry attempts
OPENSUBTITLES_RETRY_DELAY=1              # Initial delay in seconds before first retry
OPENSUBTITLES_RETRY_MAX_DELAY=60         # Maximum delay in seconds (backoff cap)
OPENSUBTITLES_RETRY_EXPONENTIAL_BASE=2   # Exponential base for backoff (2 = double each time)

# Translation Service (OpenAI GPT-5-nano)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-5-nano
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.3

# Translation Token Limits
TRANSLATION_MAX_TOKENS_PER_CHUNK=8000         # Maximum tokens per translation chunk
TRANSLATION_TOKEN_SAFETY_MARGIN=0.8           # Safety margin (0.8 = 80% of limit)

# OpenAI Retry Configuration
OPENAI_MAX_RETRIES=3                          # Maximum number of retry attempts after initial try
OPENAI_RETRY_INITIAL_DELAY=2.0                # Initial delay in seconds before first retry
OPENAI_RETRY_MAX_DELAY=60.0                   # Maximum delay in seconds (backoff cap)
OPENAI_RETRY_EXPONENTIAL_BASE=2               # Exponential base for backoff (2 = double each time)

# File Storage
SUBTITLE_STORAGE_PATH=./storage/subtitles

# Subtitle Language Configuration
SUBTITLE_DESIRED_LANGUAGE=en              # The goal language (what you want)
SUBTITLE_FALLBACK_LANGUAGE=en             # Fallback when desired isn't found (then translated to desired)

# Jellyfin Integration - General
JELLYFIN_AUTO_TRANSLATE=true

# Jellyfin WebSocket Configuration
JELLYFIN_URL=http://localhost:8096
JELLYFIN_API_KEY=
JELLYFIN_WEBSOCKET_ENABLED=true
JELLYFIN_WEBSOCKET_RECONNECT_DELAY=2.0
JELLYFIN_WEBSOCKET_MAX_RECONNECT_DELAY=300.0
JELLYFIN_FALLBACK_SYNC_ENABLED=true
JELLYFIN_FALLBACK_SYNC_INTERVAL_HOURS=24

# Scanner Configuration - File System Watcher
SCANNER_MEDIA_PATH=/media
SCANNER_WATCH_RECURSIVE=true
SCANNER_MEDIA_EXTENSIONS=.mp4,.mkv,.avi,.mov,.m4v,.webm
SCANNER_DEBOUNCE_SECONDS=2.0
SCANNER_AUTO_TRANSLATE=false

# Scanner Configuration - Webhook Server
SCANNER_WEBHOOK_HOST=0.0.0.0
SCANNER_WEBHOOK_PORT=8001
